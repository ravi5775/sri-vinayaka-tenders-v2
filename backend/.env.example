

cd ~/v2/backend

cat > .env << 'EOF'
# Server Configuration
PORT=3001
NODE_ENV=production

# APPLICATION URLs
BASE_URL=http://YOUR_SERVER_IP
FRONTEND_URL=http://YOUR_SERVER_IP
APP_IP=http://YOUR_SERVER_IP

# PostgreSQL Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=sri_vinayaka
DB_USER=postgres
DB_PASSWORD=YOUR_DB_PASSWORD_HERE
DB_POOL_SIZE=20

# JWT Configuration
JWT_SECRET=YOUR_JWT_SECRET_HERE
JWT_REFRESH_SECRET=YOUR_JWT_REFRESH_SECRET_HERE
JWT_EXPIRES_IN=24h

# CORS Configuration
CORS_ORIGIN=http://YOUR_SERVER_IP

# RATE LIMITING
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging
LOG_LEVEL=info

# MongoDB Atlas Connection (for backup/restore)
MONGO_URI=mongodb+srv://user:<db_password>@cluster.mongodb.net/test?retryWrites=true&w=majority
MONGO_DB_NAME=test

# CSRF
CSRF_SECRET=YOUR_CSRF_SECRET_HERE

# EMAIL CONFIGURATION (Gmail SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_AUTH_REQUIRED=true
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD="YOUR_SMTP_APP_PASSWORD_HERE"
EMAIL_FROM=your_email@gmail.com
EMAIL_FROM_NAME=Your App Name
EMAIL_REPLY_TO=your_email@gmail.com
EMAIL_ENABLED=true
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY_SECONDS=5

# Default Admin Credentials
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=YOUR_ADMIN_PASSWORD_HERE
EOF

cat .env
pm2 restart svt-backend
pm2 logs svt-backend --lines 10
